<?xml version='1.0' encoding='ISO-8859-1'?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core" 
  	  xmlns:h="http://java.sun.com/jsf/html" 
  	  xmlns:p="http://primefaces.org/ui">
<ui:composition template="/pages/template/template.xhtml">
  	  <ui:define name="content">
  	  	<h:form id="formRotaLista">
	  	  <div id="content">
	  	  	<p:fieldset legend="Rota">
	  	  		<p:commandButton value="Novo" action="#{rotaBean.novo}" icon="ui-icon-plus" ajax="false" style="float:right;"/>
		  	  	<p:dataTable id="tableRota" var="rota" value="#{rotaBean.lista}" 
		  	  		paginator="true" rows="25" rowIndexVar="index">
		  	  		<p:column>  
			            <f:facet name="header">Nº</f:facet>  
			            <h:outputText value="#{index+1}" />  
			        </p:column>  
			        <p:column sortBy="#{rota.descricao}">  
			            <f:facet name="header">Descricao</f:facet>  
			            <h:outputText value="#{rota.descricao}" />  
			        </p:column>  
			        <p:column sortBy="#{rota.estado.nome}">  
			            <f:facet name="header">Estado</f:facet>  
			            <h:outputText value="#{rota.estado.nome}" />  
			        </p:column>
			        <p:column style="width:40px;" headerText="Editar">
			        	<p:commandButton action="#{rotaBean.editar}" icon="ui-icon-pencil" title="Clique para Editar" ajax="false">
			        		<f:ajax event="click" execute="@form"></f:ajax>
			        		<f:setPropertyActionListener value="#{rota}" target="#{rotaBean.rota}" />
			        	</p:commandButton>
			        </p:column>
			        <p:column style="width:40px" headerText="Excluir">
			        	<p:commandButton update="tableRota" action="#{rotaBean.excluir}" icon="ui-icon-trash" ajax="false">
			        		<f:setPropertyActionListener value="#{rota}" target="#{rotaBean.rota}" />
			        	</p:commandButton>	
			        </p:column>
			        
			         <p:column style="width:40px" headerText="Ver">  
		             	 <p:commandButton update="tableRota" icon="ui-icon-search" title="View">  
		                     <f:setPropertyActionListener value="#{rota}" target="#{rotaBean.rota}" />  
		                 </p:commandButton>  
			        </p:column>  
			        
			    </p:dataTable>  
		    </p:fieldset>
	  	  </div>
	  	</h:form>	  
  	  </ui:define>
</ui:composition>
</html>
<?xml version='1.0' encoding='ISO-8859-1'?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core" 
  	  xmlns:h="http://java.sun.com/jsf/html" 
  	  xmlns:p="http://primefaces.org/ui">
<ui:composition template="/pages/template/template.xhtml">
  	  <ui:define name="content">
	  	  <div id="content">
	  	  <h:form>
	  	  	<p:fieldset legend="Mesa">
	  	  		<p:commandButton value="Novo" action="#{mesaBean.novo}" icon="ui-icon-plus" ajax="false" style="float:right;"/>
		  	  	<p:dataTable id="tablemesa" var="mesa" value="#{mesaBean.lista}" 
		  	  		paginator="true" rows="25" rowIndexVar="index">
		  	  		<p:column>  
			            <f:facet name="header">Nº</f:facet>  
			            <h:outputText value="#{index+1}" />  
			        </p:column>  
			        <p:column sortBy="#{mesa.codigo}">  
			            <f:facet name="header">Código</f:facet>  
			            <h:outputText value="#{mesa.codigo}"/>  
			        </p:column>
			        <p:column sortBy="#{mesa.tipoMesa.descricao}">  
			            <f:facet name="header">Tipo de Mesa</f:facet>  
			            <h:outputText value="#{mesa.tipoMesa.descricao}"/>  
			        </p:column>
			        <p:column sortBy="#{mesa.relogio.numero}">  
			            <f:facet name="header">Relógio</f:facet>  
			            <h:outputText value="#{mesa.relogio.numero}"/>
			        </p:column>
			        <p:column sortBy="#{mesa.inativa}">  
			            <f:facet name="header">Inativa</f:facet>
			            <h:outputText value="#{mesa.inativa}" />
			        </p:column>    
			        <p:column style="width:40px;" headerText="Editar">
			        	<p:commandButton action="#{mesaBean.editar}" icon="ui-icon-pencil" title="Clique para Editar" ajax="false">
			        		<f:ajax event="click" execute="@form"></f:ajax>
			        		<f:setPropertyActionListener value="#{mesa}" target="#{mesaBean.mesa}" />
			        	</p:commandButton>
			        </p:column>
			        <p:column style="width:40px" headerText="Excluir">
			        	<p:commandButton update="tablemesa" action="#{mesaBean.excluir}" icon="ui-icon-trash" ajax="false">
			        		<f:setPropertyActionListener value="#{mesa}" target="#{mesaBean.mesa}" />
			        	</p:commandButton>	
			        </p:column>
			        
			         <p:column style="width:40px" headerText="Ver">  
		             	 <p:commandButton update="tablemesa" icon="ui-icon-search" title="View">  
		                     <f:setPropertyActionListener value="#{mesa}" target="#{mesaBean.mesa}" />  
		                 </p:commandButton>  
			        </p:column>  
			        
			    </p:dataTable>  
		    </p:fieldset>
		    </h:form>
	  	  </div>
  	  </ui:define>
</ui:composition>
</html>